version: '3'

services:
  redis:
    image: redis
    container_name: "${DOCKER_PREFIX}_redis"
    ports:
      - "6379:6379"
    networks:
      - hw15-network
  php:
    build:
      args:
        uid: $USER_UID
        user: $USER_NAME
      context: docker
      dockerfile: Dockerfile-php
    image: '${DOCKER_PREFIX}/php'
    container_name: '${DOCKER_PREFIX}-php'
    restart: unless-stopped
    volumes:
      - ./app:/var/www/app
    networks:
      - hw15-network
volumes:
  socket:
networks:
  hw15-network:
    driver: bridge
