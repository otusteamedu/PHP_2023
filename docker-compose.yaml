version: '3'

services:
  app-server:
    build:
      context: ./php-fpm
      dockerfile: Dockerfile
    image: otus/php-fpm
    container_name: otus-app-server
    volumes:
      - ./code:/var/www/application.local
      - ./php-fpm/socket:/var/run

  app-client:
    build:
      context: ./php-fpm
      dockerfile: Dockerfile
    image: otus/php-fpm
    container_name: otus-app-client
    volumes:
      - ./code:/var/www/application.local
      - ./php-fpm/socket:/var/run
    depends_on:
      - app-server
