Домашнее задание № 17

Разработка кейсов тестирования

1\. **Модульные тесты**

**a) Валидация json-данных**

\1) Если card\_holder содержит более одного пробела, то тестируемый метод возвращает 400 с сообщением об ошибке;

\2) Если card\_holder не соответствует шаблону “/^[A-Z\-]+ [A-Z\-]+$/”, то тестируемый метод возвращает 400 с сообщением об ошибке;

\3) Если card\_number не соответствует шаблону /^\d{16}$/, то тестируемый метод возвращает 400 с сообщением об ошибке;

\4) Если card\_expiration не соответствует шаблону ”/^(0[1-9]|1[012])\/\d{2}$/”, то тестируемый метод возвращает 400 с сообщением об ошибке;

\5) Если cvv  не соответствует шаблону ”/^\d{3}$/”, то тестируемый метод возвращает 400 с сообщением об ошибке;

\6) Если order\_number  не соответствует шаблону ”/^\.{16}$/”, то тестируемый метод возвращает 400 с сообщением об ошибке;

\7) Если sum  не соответствует шаблону ”/^\d+,\d{1,2}$/”, то тестируемый метод возвращает 400 с сообщением об ошибке;

**b) Отправка запроса в сервис А**

\1) если сервис А ответит 403 кодом, то тестируемый метод возвращает 403 с сообщением об ошибке

\2) если сервис А ответит 200, то тестируемый метод вызывает метод setOrderIsPaid репозитория

**c) Запись оплаты в БД**

\1) если нет заказа с таким номером, то тестируемый метод возвращает 400 с сообщением об ошибке

\2) если сумма заказа не соответствует его номеру, то тестируемый метод возвращает 400 с сообщением об ошибке


2\. **Интеграционные тесты**

**a) Проверяем связку «фронт-бэк»:**

1\. Если card\_holder содержит более одного пробела, то после получения ответа от бэка на фронте выделяется поле «Владелец карты» красной рамкой;

сообщением об ошибке;

\2) Если card\_holder не соответствует шаблону “/^[A-Z\-]+ [A-Z\-]+$/”,то после получения ответа от бэка на фронте выделяется поле «Владелец карты» красной рамкой;

\3) Если card\_number не соответствует шаблону /^\d{16}$/, то после получения ответа от бэка на фронте выделяется поле «Номер карты» красной рамкой;

\4) Если card\_expiration не соответствует шаблону ”/^(0[1-9]|1[012])\/\d{2}$/”, то после получения ответа от бэка на фронте выделяется поле «Срок действия карты» красной рамкой;

\5) Если cvv  не соответствует шаблону ”/^\d{3}$/”,то после получения ответа от бэка на фронте выделяется поле «CVV» красной рамкой;

\6) Если order\_number  не соответствует шаблону ”/^\.{16}$/”, то после получения ответа от бэка на фронте выходит сообщение "Ошибка в номере заказа\. Обратитесь в техподдержку";

\7) Если sum  не соответствует шаблону ”/^\d+,\d{1,2}$/”, то после получения ответа от бэка на фронте выходит сообщение "Ошибка суммы заказа\. Обратитесь в техподдержку";

**b) Проверяем связку «фронт-бэк-репозиторий»:**

\1) если нет заказа с таким номером, то на фронте выходит сообщение "Ошибка\. Нет такого заказа\. Обратитесь в техподдержку за возвратом средств"

\2) если сумма заказа не соответствует его номеру, то на фронте выходит сообщение "Ошибка суммы заказа\. Обратитесь в техподдержку за возвратом средств\.


**с) Проверяем связку «фронт-бэк-сервис А»:**

\1) если сервис А ответит 403 кодом, бэк посылает ошибку на фронт, на фронте появляется сообщение "Ошибка оплаты\. Попробуйте позднее"

\2) если сервис А ответит 200, бэк также отправит фронту 200, на фронте появится сообщение об успешной оплате



3\. **Системные тесты**

\1) Если cvv неверен, то после получения ответа от бэка на фронте выводится сообщение об ошибке «Не удалось списать данные с карты, проверьте реквизиты»\.

\2) Если все данные верные, но списание денег с карты не произошло (на карте недостаточно денег, карта заблокирована банком), то после получение ответа от бэка на фронте выводится соответствующее сообщение\.

