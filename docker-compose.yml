version: '3.8'

networks:
  app-network:
    driver: bridge

services:
  php_server:
    build:
      dockerfile: docker/cli/Dockerfile
      context: .
    volumes:
      - .:/src
      - ./docker/sock:/sock:rw
      - ./docker/cli/zz-docker.conf:/socket
    container_name: php_server
    command: php index.php server
#    stdin_open: true
#    tty: true
    networks:
      - app-network
  php_client:
    build:
      dockerfile: docker/cli/Dockerfile
      context: .
    volumes:
      - .:/src
      - ./docker/sock:/sock:rw
      - ./docker/cli/zz-docker.conf:/socket
    container_name: php_client
    command: php index.php client
#    stdin_open: true
#    tty: true
    networks:
      - app-network

