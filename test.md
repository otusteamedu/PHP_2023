# Кейсы тестирования для страницы оплаты фильма

## Модульные тесты (бэк)

| Кейс                       | Ожидаемый результат                                      |
| -------------------------- | -------------------------------------------------------- |
| Валидация номера карты     | Возвращает 400 с сообщением об ошибке, если не 16 цифр. |
| Валидация card_holder      | Возвращает 400 с сообщением об ошибке при наличии более одного пробела. |
| Валидация card_expiration  | Возвращает 400 с сообщением об ошибке при некорректном формате "мм/гг". |
| Валидация cvv              | Возвращает 400 с сообщением об ошибке, если не 3 цифры. |

## Модульные тесты (репозиторий)

| Кейс                                    | Ожидаемый результат                               |
| --------------------------------------- | ------------------------------------------------- |
| Тест успешной записи оплаты             | Метод возвращает true при передаче корректных данных (номер заказа и сумма). |
| Тест неуспешной записи оплаты           | Метод возвращает false или выбрасывает исключение при передаче некорректных данных (номер заказа или сумма не соответствуют). |

## Интеграционные тесты (фронт-бэк)

| Кейс                                      | Ожидаемый результат                               |
| ----------------------------------------- | ------------------------------------------------- |
| Проверка валидации card_holder на фронте  | После получения ответа от бэка выделяется поле "card_holder" красной рамкой при наличии более одного пробела. |
| Проверка валидации card_number на фронте  | После получения ответа от бэка выделяется поле "card_number" красной рамкой, если номер карты не содержит 16 цифр. |

## Интеграционные тесты (бэк-репозиторий)

| Кейс                                | Ожидаемый результат                               |
| ----------------------------------- | ------------------------------------------------- |
| Тест успешной записи оплаты в БД    | При успешной оплате на бэке вызывается метод setOrderIsPaid с корректными данными (номер заказа и сумма), и метод возвращает true. |
| Тест неуспешной записи оплаты в БД  | При неуспешной оплате на бэке вызывается метод setOrderIsPaid с некорректными данными (номер заказа или сумма не соответствуют), и метод возвращает false или выбрасывает исключение. |

## Системные тесты

| Кейс                                       | Ожидаемый результат                               |
| ------------------------------------------ | ------------------------------------------------- |
| Тест успешной оплаты                       | Если сервис A возвращает HTTP-код 200, то пользователю отображается сообщение об успешной оплате, и оплата записывается в БД. |
| Тест неуспешной оплаты из-за неверного cvv | Если сервис A возвращает HTTP-код 403 из-за неверного cvv, то на фронте выводится сообщение об ошибке "Не удалось списать данные с карты, проверьте реквизиты". |
| Тест неуспешной оплаты из-за ошибки сервиса A | Если сервис A возвращает HTTP-код 403 из-за другой ошибки (например, недостаточно средств), то на фронте выводится сообщение об ошибке "Ошибка при списании средств, попробуйте позже". |
| Тест неуспешной оплаты из-за некорректных данных | Если сервис A возвращает HTTP-код 400 из-за некорректных данных, то на фронте выводится сообщение "Пожалуйста, проверьте введенные данные" или аналогичное. |

