# Домашнее задание
Скрипт деплоя

## Цель:
Научиться доставлять приложение до указанной среды.

## Описание/Пошаговая инструкция выполнения домашнего задания:
Используя выбранный инструмент автоматического деплоя, необходимо реализовать автоматическую выкатку написанного ранее мини-приложения на собственный виртуальный сервер.

## Критерии оценки:
1. Автоматическая доставка на любую среду;
2. Доставка без downtime;
3. Желательно организовать отдельный закрытый репозиторий настроек, из которого формируются файлы конфигурации для выбранной среды в момент деплоя.


# Об окружении
1. Поднял две VM(ubuntu 22.04) на домашнем сервере:
   - gitlab 
 ![gitlab](./data/0_vm_gitlab.png)
   - petServer 
 ![petServer](./data/1_vm_petServer.png)
2. Задал dns имена на роутере для удобной работы с VM 
 ![dns](./data/2_dns.png)

Проект для развертывания был взят из ДЗ №20(hm20)
Создан репозиторий otus_php_prof_hw21 с основной веткой master
Заданы переменный окружения в проекте gitlab ![env vars](./data/3_variables.png)
Добавлен токен для деплоя ![token](./data/4_token.png)

## Проверка работы
1. Пушем в master
2. Ждем пока отработает pipeline 
![pipeline](./data/5_pipeline.png)
3. Идем в OpenAPI `/api/doc` приложения и проверяем его работу 
![api](./data/6_api.png)
4. При необходимости можно откатиться на предыдущею версию 
![rollback](./data/7_rollback.png) 
