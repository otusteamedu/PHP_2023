version: '3'
services:
  php-server:
    build:
      context: ./server-fpm
      dockerfile: Dockerfile
    volumes:
      - ./:/usr/src/myapp
      - socket_volume:/tmp

  php-client:
    build:
      context: ./client-fpm
      dockerfile: Dockerfile
    volumes:
      - ./:/usr/src/myapp
      - socket_volume:/tmp
    stdin_open: true
    tty: true
    depends_on:
      - php-server

volumes:
  socket_volume: