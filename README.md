# Кейсы тестирования для ДЗ 25

## 1. Модульные тесты

1. backend:
    1. Проверка входных данных:
        1. Поле card_number не соответствует шаблону ^\d{16}$ - вернуть ответ с кодом 400 и полем card_number.
        1. Поле card_number не проходит проверку по алгоритму Луна - вернуть ответ с кодом 400 и полем card_number.
        1. Поле card_holder не соответствует шаблону ^\[A-Za-z]+\s[A-Za-z]+$ - вернуть ответ с кодом 400 и полем card_holder.
        1. Проверка поля card_expiration:
            1. Не соответствует шаблону ^\d{2}/\\d{2}$ - вернуть ответ с кодом 400 и полем card_expiration.
            1. MM в поле card_expiration больше 12 - вернуть ответ с кодом 400 и полем card_expiration.
            1. MM-ГГ в поле card_expiration меньше текущего месяца и года - вернуть ответ с кодом 400 и полем card_expiration.
        1. Поле cvv не соответствует шаблону ^\d{3}$ - вернуть ответ с кодом 400 и полем cvv.
        1. Поле order_number не соответствует шаблону ^.{16}$ - вернуть ответ с кодом 400 и полем order_number.
        1. Поле sum не соответствует шаблону ^\d+(,\d{1,2})?$ - вернуть ответ с кодом 400 и полем sum.
    1. Проверка ответа от сервиса А:
        1. Ответ от сервиса с кодом 403 - вернуть ответ с кодом 400 и сообщением об ошибке.
        1. Ответ от сервиса с кодом 200 - вызвать метод репозиторий::setOrderIsPaid.
    1. Проверка возвращаемого результата от метода setOrderIsPaid:
        1. true - вернуть ответ с кодом 200.
        1. false - вернуть ответ с кодом 400 и сообщением об ошибке.
        1. В случае получения исключения:
            1. orderNumber не найден - вернуть ответ с кодом 400 и сообщением об ошибке и полем order_number.
            1. sum не соответствует - вернуть ответ с кодом 400 и сообщением об ошибке и полем sum.
            1. иное - вернуть ответ с кодом 400 и сообщением об ошибке.
1. репозиторий:
    1. При пустых/нулевых параметрах orderNumber или sum - выбросить исключение о неверных параметрах
    1. orderNumber отсутствует - выбросить исключение orderNumber не найден
    1. sum не соответствует заказу - выбросить исключение sum не соответствует заказу

## Интеграционные тесты
1. backend - frontend:
    1. Получен ответ с кодом 400:
        1. В ответе имеется поле card_number - 3 раза мигаем красной рамкой поля Номер карты и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректный номер карты.
        1. В ответе имеется поле card_holder - 3 раза мигаем красной рамкой поля Владелец карты и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректный владелец карты.
        1. В ответе имеется поле card_expiration - 3 раза мигаем красной рамкой поля Окончание действия карты и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректный срок окончание действия карты.
        1. В ответе имеется поле cvv - 3 раза мигаем красной рамкой поля cvv и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректный cvv.
        1. В ответе имеется поле order_number - 3 раза мигаем красной рамкой поля Номер заказа и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректный номер заказа или сообщение из ответа.
        1. В ответе имеется поле sum - 3 раза мигаем красной рамкой поля Сумма и оставляем красную рамку вокруг поля, отображаем сообщение об
           ошибке - некорректная сумма или сообщение из ответа.
        1. В ответе имеется сообщение об ошибке - отобразить сообщение об ошибке.
        1. Получен пустой ответ - отобразить сообщение об ошибке по-умолчанию.
    1. Получен ответ с кодом 200 - отобразить сообщение об успехе.
1. backend - сервис А - репозиторий:
    1. При верных входных данных и получении ответа от сервиса А с кодом 200 - должен вернуться ответ с кодом 200
    1. При верных входных данных и получении ответа от сервиса А с кодом 403 - должен вернуться ответ с кодом 400
    2. При верных входных данных для сервиса А и неверными данными для репозитория и получении ответа от сервиса А с
       кодом 200 - должен вернуться ответ с кодом 400

## Системные тесты
1. При ввобде некорректных данные после получения ответа от backend на frontend должно отобразиться сообщение
   об ошибке и поля с ошибками должны мигнуть 3 раза красной рамкой и потом остаться выделенными красной рамкой.
1. При неудачной попытке на стороне backend списать с карты нужную сумму на frontend должно отобразиться сообщение
   об ошибке.
1. В случае успешного списания с карты денежных средств, но при этом неверном номере заказа или неверной сумме, после получения ответа от backend на frontend должно отобразиться сообщение
   об ошибке, а поля с ошибкой должны мигнуть 3 раза красной рамкой и остаться выделенными красной рамкой.
1. В случае успешного списания с карты денежных средств и отсутствии ошибок в данных заказа после получения ответа от backend на frontend должно отобразиться сообщение
   об успешном выполнении.