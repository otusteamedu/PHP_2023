#!/usr/bin/env php
<?php
declare(strict_types=1);

require __DIR__ . '/../vendor/autoload.php';

use Shabanov\Otusphp\Command\ConsumerCommand;
use Symfony\Component\Console\Application;
use Symfony\Component\Dotenv\Dotenv;

//print_r($_ENV);

//$dotenv = new Dotenv();
//$dotenv->load(__DIR__ . '/../../.env');

$application = new Application();
$application->add(new ConsumerCommand(new $_ENV['BROKER_CONNECT']()));
try {
    $application->run();
} catch (Exception $e) {
    throw new \Exception($e->getMessage());
}
