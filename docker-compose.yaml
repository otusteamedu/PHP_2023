version: '3'

services:
  app-server:
    build:
      context: ./
      dockerfile: Dockerfile
    image: php-server
    container_name: app-server
    volumes:
      - ./app:/app
      - ./sock:/sock
    networks:
      - app-network

  app-client:
    build:
      context: ./
      dockerfile: Dockerfile
    image: php-client
    container_name: app-client
    depends_on:
      - app-server
    volumes:
      - ./app:/app
      - ./sock:/sock
    networks:
      - app-network

networks:
  app-network:
    driver: bridge