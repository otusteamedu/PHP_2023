# Кейсы тестирования для страницы оплаты фильма

## Модульные тесты (бэк)

| Кейс                                       | Ожидаемый результат                                      |
| ------------------------------------------ | -------------------------------------------------------- |
| Валидация номера карты                      | Возвращает 400 с сообщением об ошибке, если не 16 цифр. |
| Валидация card_holder                       | Возвращает 400 с сообщением об ошибке при наличии более одного пробела, наличии не латинских символов и дефиса. |
| Валидация card_expiration                   | Возвращает 400 с сообщением об ошибке при некорректном формате "мм/гг". |
| Валидация cvv                               | Возвращает 400 с сообщением об ошибке, если не 3 цифры. |
| Валидация order_number                      | Возвращает 400 с сообщением об ошибке, если номер заказа не соответствует формату. |
| Валидация sum                               | Возвращает 400 с сообщением об ошибке, если сумма не является валидным числом. |
| Успешная валидация всех данных              | Все данные валидны - возвращает HTTP-код 200. |

## Модульные тесты (репозиторий)

| Кейс                                    | Ожидаемый результат                               |
| --------------------------------------- | ------------------------------------------------- |
| Тест успешной записи оплаты             | Метод возвращает true при передаче корректных данных (номер заказа и сумма). |
| Тест неуспешной записи оплаты           | Метод возвращает false или выбрасывает исключение при передаче некорректных данных (номер заказа или сумма не соответствуют). |

## Интеграционные тесты (фронт-бэк)

| Кейс                                      | Ожидаемый результат                               |
| ----------------------------------------- | ------------------------------------------------- |
| Проверка передачи верных данных           | Все данные верны - возвращает HTTP-код 200. |
| Проверка передачи неверных данных         | При наличии неверных данных возвращает HTTP-код 400. |

## Интеграционные тесты (бэк-сервис A)

| Кейс                                   | Ожидаемый результат                               |
| -------------------------------------- | ------------------------------------------------- |
| Успешное взаимодействие с сервисом A  | Сервис A возвращает HTTP-код 200. |
| Неуспешное взаимодействие с сервисом A | Сервис A возвращает HTTP-код 403. |

## Системные тесты

| Кейс                                       | Ожидаемый результат                               |
| ------------------------------------------ | ------------------------------------------------- |
| Тест успешной оплаты                       | Если сервис A возвращает HTTP-код 200, то пользователю отображается сообщение об успешной оплате, и оплата записывается в БД. |
| Тест неуспешной оплаты из-за неверного cvv | Если сервис A возвращает HTTP-код 403 из-за неверного cvv, то на фронте выводится сообщение об ошибке "Не удалось списать данные с карты, проверьте реквизиты". |
| Тест неуспешной оплаты из-за ошибки сервиса A | Если сервис A возвращает HTTP-код 403 из-за другой ошибки (например, недостаточно средств), то на фронте выводится сообщение об ошибке "Ошибка при списании средств, попробуйте позже". |
| Тест неуспешной оплаты из-за некорректных данных | Если сервис A возвращает HTTP-код 400 из-за некорректных данных, то на фронте выводится сообщение "Пожалуйста, проверьте введенные данные" или аналогичное. |
