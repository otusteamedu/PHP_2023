## Модульные тесты:

1. Проверка валидации данных:

   a. Если все данные корректны, то тестируемый метод возвращает статус 200 (успех).

   b. Если поле card_holder содержит более одного пробела, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверно указано имя владельца карты".

   c. Если поле card_number не содержит 16 цифр, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверный номер карты".

   d. Если поле card_number содержит 16 цифр, то тестируемый метод возвращает 200 с сообщением об успехе "Валидный номер карты".

   f. Если поле card_expiration содержит некорректный формат месяца/года, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверный формат окончания действия карты".

   e. Если поле cvv не содержит 3 цифры, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверный CVV-код".

   f. Если поле cvv содержит 3 цифры, то тестируемый метод возвращает 200 с сообщением об успехе "Верный CVV код".

   g. Если поле order_number содержит более 16 символов, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверный номер заказа".

   h. Если поле sum содержит некорректный формат суммы, то тестируемый метод возвращает 400 с сообщением об ошибке "Неверный формат суммы оплаты".

2. Проверка успешного списания денег:

   a. Если списание средств на сервисе A успешно, то в репозиторий передается информация об успешной оплате с верными параметрами и метод setOrderIsPaid возвращает true

   b. Если запись об успешной оплате успешно добавлена в БД, то после получения ответа от бэка на фронте отображается сообщение об успешной оплате.

3. Проверка записи в БД:

   a. При успешном списании денег и вызове метода setOrderIsPaid() с правильными параметрами, метод возвращает true.

   b. При успешном списании денег и вызове метода setOrderIsPaid() с неправильными параметрами, метод выбрасывает исключение.

   c. При неуспешном списании денег, метод setOrderIsPaid() не вызывается.

## Интеграционные тесты:

1. Проверка связки "фронт-бэк":

   a. Если поле card_holder содержит более одного пробела, то после получения ответа от бэка на фронте выделяется поле "Номер карты" красной рамкой.

   b. Если поле card_number не содержит 16 цифр, то после получения ответа от бэка на фронте выделяется поле "Номер карты" красной рамкой.

   c. Если поле card_expiration содержит некорректный формат месяца/года, то после получения ответа от бэка на фронте выделяется поле "Месяц/год окончания" красной рамкой.

   d. Если поле cvv не содержит 3 цифры, то после получения ответа от бэка на фронте выделяется поле "CVV" красной рамкой.

   e. Если поле order_number содержит более 16 символов, то после получения ответа от бэка на фронте выделяется поле "Номер заказа" красной рамкой.

   f. Если поле sum содержит некорректный формат суммы, то после получения ответа от бэка на фронте выделяется поле "Сумма оплаты" красной рамкой.

2. Проверка связки "бэк-репозиторий":

   a. При успешном списании денег и вызове метода setOrderIsPaid() с правильными параметрами, метод возвращает true.

   b. При успешном списании денег и вызове метода setOrderIsPaid() с неправильными параметрами, метод выбрасывает исключение.

   c. При неуспешном списании денег, метод setOrderIsPaid() не вызывается.

## Системные тесты:

1. Если cvv неверен, то после получения ответа от бэка на фронте выводится сообщение об ошибке "Не удалось списать данные с карты, проверьте реквизиты".

2. Проверка обработки ошибок от сервиса A:

   a. Если сервис A возвращает HTTP-код 403 при попытке списания денег, то после получения ответа от бэка на фронте выводится сообщение об ошибке "Ошибка списания средств, попробуйте еще раз или обратитесь в службу поддержки".

   b. Если сервис A возвращает любой другой непредвиденный HTTP-код при попытке списания денег, то после получения ответа от бэка на фронте выводится сообщение об ошибке "Произошла ошибка, попробуйте еще раз или обратитесь в службу поддержки".

3. Проверка поведения фронта при успешной оплате:

   a. После успешного списания денег и записи информации об оплате в БД, на фронте отображается сообщение об успешной оплате и информация о заказе.

   b. После успешного списания денег и записи информации об оплате в БД, на фронте осуществляется переход на страницу с подтверждением оплаты.

4. Проверка поведения фронта при неуспешной оплате:

   a. Если произошла ошибка при списании денег, то на фронте выводится сообщение об ошибке и предоставляются дальнейшие инструкции для возможности повторной оплаты или обращения в службу поддержки.

   b. Если произошла ошибка при записи информации об оплате в БД, то на фронте выводится сообщение об ошибке и предоставляются дальнейшие инструкции для возможности повторной оплаты или обращения в службу поддержки.
