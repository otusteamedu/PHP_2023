# Кейсы тестирования

## Модульные тесты

1. Если card_holder содержит более одного пробела, 
то тестируемый метод возвращает 400 с сообщением об ошибке.

2. Если card_expiration имеет некорректный формат (мм/гг),
то тестируемый метод возвращает 400 с сообщением об ошибке.

3. Если cvv содержит буквы или символы,
то тестируемый метод возвращает 400 с сообщением об ошибке.

4. Если order_number состоит из более чем 16 символов,
то тестируемый метод возвращает 400 с сообщением об ошибке.

5. Если sum содержит в качестве разделителя вместо запятой точку,
то тестируемый метод возвращает 400 с сообщением об ошибке.

## Интеграционные тесты

1. Проверяем связку "фронт-бэк":
    1. Отправляем запрос с корректными данными на бэк, ожидаем HTTP-код 200 и успешное выполнение операции.
    2. Отправляем запрос с некорректными данными на бэк, ожидаем HTTP-код 400 и соответствующее сообщение об ошибке.
       Убеждаемся, что фронт выделяет соответствующее поле красной рамкой.

2. Проверяем связку "бэк-репозиторий":
   1. Отправляем успешный запрос на списание денег в бэк, и проверяем, что метод репозитория setOrderIsPaid вызывается один раз и возвращает true.
   2. Отправляем запрос на списание денег в бэк, вызываем метод репозитория setOrderIsPaid с несоответствующим номером заказа, и проверяем, что метод setOrderIsPaid бросает исключение.

## Системные тесты

1. Если CVV неверен, то после получения ответа от бэка на фронте выводится сообщение об ошибке "Не удалось списать данные с карты, проверьте реквизиты".

2. Если списание денег не удалось (HTTP-код 403 от сервиса A), то после получения ответа от бэка на фронте выводится сообщение об ошибке, которую прислал сервис А.

3. При успешной оплате (HTTP-код 200 от сервиса A) убеждаемся, что информация об успешной оплате записана в базу данных и на фронте произошёл редирект на страницу с сообщением об успешной оплате или на страницу с доступом к фильму.
