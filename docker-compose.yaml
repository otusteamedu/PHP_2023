version: '3.9'

services:
    client:
        container_name: otus_socket_client
        build:
            dockerfile: .docker/php/Dockerfile
            context: ./
            target: default
        restart: always
        depends_on:
            - server

        volumes:
            - ./:/var/www
            - shared:/shared
        stdin_open: true
        tty: true

    server:
        container_name: otus_socket_server
        build:
            dockerfile: .docker/php/Dockerfile
            context: ./
            target: server
        restart: always
        volumes:
            - ./:/var/www
            - shared:/shared

volumes:
    shared: {}
