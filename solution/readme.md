

Сперва проверяются "негативные" сценарии,
то есть с ожиданием ошибок,
без выполнения успешной оплаты.
Если один из "негативных" тестов завершился успешной оплатой,
последовательность выполнения тестов прерывается.
Таким образом при выполнении последовательности тестов -
списания средств не предполагается,
или списание происходит лишь одно -
и в этом случае выполнение тестов прерывается.


1. Модульные тесты:
`а` `card_holder`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (только имя) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (только фамилия) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (Имя_Фамилия - через знак подчеркивания) - ожидание: возврат ошибки в данных, с кодом 400;
`б` `card_number`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (число 0) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (123456789012345 число длиной 15 символов) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (12345678901234567 число длиной 17 символов) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (пустой массив) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (массив из 14 односимвольных цифр - существующий формат номер банковских карт) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (массив из 16 односимвольных цифр) - ожидание: возврат ошибки в данных, с кодом 400;
    *- валидация значения (число из 16-ти НОЛЕЙ) - ожидание: возврат ошибки в данных(не соответствие Владельца Карты и Номера Карты), с кодом 400;
`в` `card_expiration`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (пустой массив) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (00/00) - ожидание: возврат ошибки в данных (ошибка месяца), с кодом 400;
    - валидация значения (-01/00) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (01/-00) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (13/00) - ожидание: возврат ошибки в данных (ошибка месяца), с кодом 400;
    - валидация значения (o2/00) - ожидание: возврат ошибки в данных (ошибка месяца, указано не число), с кодом 400;
`г` `cvv`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (пустой массив) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (значение из 4 односимвольных цифр) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (отрицательное значение) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (значение с десятичной точкой/запятой) - ожидание: возврат ошибки в данных, с кодом 400;
`д` `order_number`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (пустой массив) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (число длиной 15 символов) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (число длиной 17 символов) - ожидание: возврат ошибки в данных, с кодом 400;
`е` `sum`
    - валидация значения (пустая строка) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (null) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (пустой массив) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (только запятая) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (только две запятых) - ожидание: возврат ошибки в данных, с кодом 400;
    - валидация значения (число) - ожидание: возврат ошибки в данных (не верный формат данных, с кодом 400;
    - валидация значения (значение с двумя десятичными запятыми) - ожидание: возврат ошибки в данных (не верный формат данных, с кодом 400;
    - валидация значения (строка с минусом в начале) - ожидание: возврат ошибки в данных (не верный формат данных, с кодом 400;

2. Интеграционные тесты:
`а` связка "фронт-бэк"
    - при ошибке валидации полей - на фронте соответствующее поле визуально отмечено красной рамкой;
    - при корректно валидируемых значений карты, но с не соответствием требованиям Сервиса "А" (поле card_expiration указывает на просроченную карту) на фронте появляется сообщение об ошибке/уведомление об не_удачной попытке оплаты заказа;
`б` связка "бэк-репозиторий"
    - Бэк вызывает метод Репозитория - setOrderIsPaid(string $orderNumber, float $sum): bool - с Номером заказа и Отрицательной суммой - ожидание: ответ false (Исключение корректно обрабатывается)
    - Бэк вызывает метод Репозитория - setOrderIsPaid(string $orderNumber, float $sum): bool - где Номер заказа - пустая строка и корректная сумма - ожидание: ответ false
    - Бэк вызывает метод Репозитория - setOrderIsPaid(string $orderNumber, float $sum): bool - где Номер заказа - пустая строка и отрицательная сумма - ожидание: ответ false (Исключение корректно обрабатывается)
`в` связка "бэк-сервис'А'"
    - передача от Бэка -> Сервису"А" данных карты "Владелец Карты" корректное валидируемое значение Бэком, "Номер карты" 16 Нолей - ожидание: ошибка списания денег(не соответствия Владельца и Номера карты), код 403 от сервиса "А" -> Бэку;
    - передача от Бэка -> Сервису"А" с отрицательной суммой (то есть строковое значение меньше 0) - ожидание: ошибка списания денег(не корректная сумма списания заказа), код 403 от сервиса "А" -> Бэку;

3. Системные тесты:
`а` при неуспешной оплате - в хранилище (используемым Репозиторием) появляются данные о неуспешной попытке оплаты заказа (номер заказа, сумма)
`б` при успешной оплате - в хранилище появляются данные об успешной попытке оплаты заказа (номер заказа, сумма)
`в` попытка оплаты заказа с корректными данными карты и заказа, но недостаточным количеством средств на карте для оплаты заказа (в случае, если кредит/долг не предусмотрен)
   
** Позитивный кейс
1 указываются корректные данные банковской карты на фронте (card_number, card_holder, card_expiration, cvv)
2 указываются корректные данные заказа на фронте (order_number, sum)
3 запускается выполнение оплаты заказа
4 заказ успешно оплачен. Ожидание - сообщение об успешном выполнении на Фронте, изменение статуса заказа - оплачен.

** Дополнительный кейс
- попытка повторной оплаты заказа
- ожидание: не_успешность списания средств с Уведомлением на Фронте

В данном сценарии списание средств предусмотрено, только на одном шаге,
что позволяет экономно запускать тесты и быть уверенным в выполнении задачи.
